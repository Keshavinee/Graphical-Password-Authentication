const ImageListFlags = [
  "static/main/Assets/Password Images/Flags/1.jpg",
  "static/main/Assets/Password Images/Flags/2.jpg",
  "static/main/Assets/Password Images/Flags/3.jpg",
  "static/main/Assets/Password Images/Flags/4.jpg",
  "static/main/Assets/Password Images/Flags/5.jpg",
  "static/main/Assets/Password Images/Flags/6.jpg",
  "static/main/Assets/Password Images/Flags/7.jpg",
  "static/main/Assets/Password Images/Flags/8.jpg",
  "static/main/Assets/Password Images/Flags/9.jpg",
  "static/main/Assets/Password Images/Flags/10.jpg",
  "static/main/Assets/Password Images/Flags/11.jpg",
  "static/main/Assets/Password Images/Flags/12.jpg",
  "static/main/Assets/Password Images/Flags/13.jpg",
  "static/main/Assets/Password Images/Flags/14.jpg",
  "static/main/Assets/Password Images/Flags/15.jpg",
  "static/main/Assets/Password Images/Flags/16.jpg",
  "static/main/Assets/Password Images/Flags/17.jpg",
  "static/main/Assets/Password Images/Flags/18.jpg",
  "static/main/Assets/Password Images/Flags/19.jpg",
  "static/main/Assets/Password Images/Flags/20.jpg",
  "static/main/Assets/Password Images/Flags/21.jpg",
  "static/main/Assets/Password Images/Flags/22.jpg",
  "static/main/Assets/Password Images/Flags/23.jpg",
  "static/main/Assets/Password Images/Flags/24.jpg",
  "static/main/Assets/Password Images/Flags/25.jpg",
];
const ImageListApps = [
  "static/main/Assets/Password Images/Apps/26.jpg",
  "static/main/Assets/Password Images/Apps/27.jpg",
  "static/main/Assets/Password Images/Apps/28.jpg",
  "static/main/Assets/Password Images/Apps/29.jpg",
  "static/main/Assets/Password Images/Apps/30.jpg",
  "static/main/Assets/Password Images/Apps/31.jpg",
  "static/main/Assets/Password Images/Apps/32.jpg",
  "static/main/Assets/Password Images/Apps/33.jpg",
  "static/main/Assets/Password Images/Apps/34.jpg",
  "static/main/Assets/Password Images/Apps/35.jpg",
  "static/main/Assets/Password Images/Apps/36.jpg",
  "static/main/Assets/Password Images/Apps/37.jpg",
  "static/main/Assets/Password Images/Apps/38.jpg",
  "static/main/Assets/Password Images/Apps/39.jpg",
  "static/main/Assets/Password Images/Apps/40.jpg",
  "static/main/Assets/Password Images/Apps/41.jpg",
  "static/main/Assets/Password Images/Apps/42.jpg",
  "static/main/Assets/Password Images/Apps/43.jpg",
  "static/main/Assets/Password Images/Apps/44.jpg",
  "static/main/Assets/Password Images/Apps/45.jpg",
  "static/main/Assets/Password Images/Apps/46.jpg",
  "static/main/Assets/Password Images/Apps/47.jpg",
  "static/main/Assets/Password Images/Apps/48.jpg",
  "static/main/Assets/Password Images/Apps/49.jpg",
  "static/main/Assets/Password Images/Apps/50.jpg",
];
const ImageListAnimals = [
  "static/main/Assets/Password Images/Animals/51.jpg",
  "static/main/Assets/Password Images/Animals/52.jpg",
  "static/main/Assets/Password Images/Animals/53.jpg",
  "static/main/Assets/Password Images/Animals/54.jpg",
  "static/main/Assets/Password Images/Animals/55.jpg",
  "static/main/Assets/Password Images/Animals/56.jpg",
  "static/main/Assets/Password Images/Animals/57.jpg",
  "static/main/Assets/Password Images/Animals/58.jpg",
  "static/main/Assets/Password Images/Animals/59.jpg",
  "static/main/Assets/Password Images/Animals/60.jpg",
  "static/main/Assets/Password Images/Animals/61.jpg",
  "static/main/Assets/Password Images/Animals/62.jpg",
  "static/main/Assets/Password Images/Animals/63.jpg",
  "static/main/Assets/Password Images/Animals/64.jpg",
  "static/main/Assets/Password Images/Animals/65.jpg",
  "static/main/Assets/Password Images/Animals/66.jpg",
  "static/main/Assets/Password Images/Animals/67.jpg",
  "static/main/Assets/Password Images/Animals/68.jpg",
  "static/main/Assets/Password Images/Animals/69.jpg",
  "static/main/Assets/Password Images/Animals/70.jpg",
  "static/main/Assets/Password Images/Animals/71.jpg",
  "static/main/Assets/Password Images/Animals/72.jpg",
  "static/main/Assets/Password Images/Animals/73.jpg",
  "static/main/Assets/Password Images/Animals/74.jpg",
  "static/main/Assets/Password Images/Animals/75.jpg",
];
let ImageListEmojis = [
  "static/main/Assets/Password Images/Emojis/76.jpg",
  "static/main/Assets/Password Images/Emojis/77.jpg",
  "static/main/Assets/Password Images/Emojis/78.jpg",
  "static/main/Assets/Password Images/Emojis/79.jpg",
  "static/main/Assets/Password Images/Emojis/80.jpg",
  "static/main/Assets/Password Images/Emojis/81.jpg",
  "static/main/Assets/Password Images/Emojis/82.jpg",
  "static/main/Assets/Password Images/Emojis/83.jpg",
  "static/main/Assets/Password Images/Emojis/84.jpg",
  "static/main/Assets/Password Images/Emojis/85.jpg",
  "static/main/Assets/Password Images/Emojis/86.jpg",
  "static/main/Assets/Password Images/Emojis/87.jpg",
  "static/main/Assets/Password Images/Emojis/88.jpg",
  "static/main/Assets/Password Images/Emojis/89.jpg",
  "static/main/Assets/Password Images/Emojis/91.jpg",
  "static/main/Assets/Password Images/Emojis/92.jpg",
  "static/main/Assets/Password Images/Emojis/90.jpg",
  "static/main/Assets/Password Images/Emojis/93.jpg",
  "static/main/Assets/Password Images/Emojis/94.jpg",
  "static/main/Assets/Password Images/Emojis/95.jpg",
  "static/main/Assets/Password Images/Emojis/96.jpg",
  "static/main/Assets/Password Images/Emojis/97.jpg",
  "static/main/Assets/Password Images/Emojis/98.jpg",
  "static/main/Assets/Password Images/Emojis/99.jpg",
  "static/main/Assets/Password Images/Emojis/100.jpg",
];
const ImageListFruits = [
  "static/main/Assets/Password Images/Fruits/101.jpg",
  "static/main/Assets/Password Images/Fruits/102.jpg",
  "static/main/Assets/Password Images/Fruits/103.jpg",
  "static/main/Assets/Password Images/Fruits/104.jpg",
  "static/main/Assets/Password Images/Fruits/105.jpg",
  "static/main/Assets/Password Images/Fruits/106.jpg",
  "static/main/Assets/Password Images/Fruits/107.jpg",
  "static/main/Assets/Password Images/Fruits/108.jpg",
  "static/main/Assets/Password Images/Fruits/109.jpg",
  "static/main/Assets/Password Images/Fruits/110.jpg",
  "static/main/Assets/Password Images/Fruits/111.jpg",
  "static/main/Assets/Password Images/Fruits/112.jpg",
  "static/main/Assets/Password Images/Fruits/113.jpg",
  "static/main/Assets/Password Images/Fruits/114.jpg",
  "static/main/Assets/Password Images/Fruits/115.jpg",
  "static/main/Assets/Password Images/Fruits/116.jpg",
  "static/main/Assets/Password Images/Fruits/117.jpg",
  "static/main/Assets/Password Images/Fruits/118.jpg",
  "static/main/Assets/Password Images/Fruits/119.jpg",
  "static/main/Assets/Password Images/Fruits/120.jpg",
  "static/main/Assets/Password Images/Fruits/121.jpg",
  "static/main/Assets/Password Images/Fruits/122.jpg",
  "static/main/Assets/Password Images/Fruits/123.jpg",
  "static/main/Assets/Password Images/Fruits/124.jpg",
  "static/main/Assets/Password Images/Fruits/125.jpg",
];
const ImageListFlowers = [
  "static/main/Assets/Password Images/Instruments/126.jpg",
  "static/main/Assets/Password Images/Instruments/127.jpg",
  "static/main/Assets/Password Images/Instruments/128.jpg",
  "static/main/Assets/Password Images/Instruments/129.jpg",
  "static/main/Assets/Password Images/Instruments/130.jpg",
  "static/main/Assets/Password Images/Instruments/131.jpg",
  "static/main/Assets/Password Images/Instruments/132.jpg",
  "static/main/Assets/Password Images/Instruments/133.jpg",
  "static/main/Assets/Password Images/Instruments/134.jpg",
  "static/main/Assets/Password Images/Instruments/135.jpg",
  "static/main/Assets/Password Images/Instruments/136.jpg",
  "static/main/Assets/Password Images/Instruments/137.jpg",
  "static/main/Assets/Password Images/Instruments/138.jpg",
  "static/main/Assets/Password Images/Instruments/139.jpg",
  "static/main/Assets/Password Images/Instruments/140.jpg",
  "static/main/Assets/Password Images/Instruments/141.jpeg",
  "static/main/Assets/Password Images/Instruments/142.jpg",
  "static/main/Assets/Password Images/Instruments/143.jpg",
  "static/main/Assets/Password Images/Instruments/144.jpg",
  "static/main/Assets/Password Images/Instruments/145.jpg",
  "static/main/Assets/Password Images/Instruments/146.jpg",
  "static/main/Assets/Password Images/Instruments/147.jpg",
  "static/main/Assets/Password Images/Instruments/148.jpg",
  "static/main/Assets/Password Images/Instruments/149.jpg",
  "static/main/Assets/Password Images/Instruments/150.jpg",
];
const ImageListFood = [
  "static/main/Assets/Password Images/Foods/151.jpg",
  "static/main/Assets/Password Images/Foods/152.jpg",
  "static/main/Assets/Password Images/Foods/153.jpg",
  "static/main/Assets/Password Images/Foods/154.jpg",
  "static/main/Assets/Password Images/Foods/155.jpg",
  "static/main/Assets/Password Images/Foods/156.jpg",
  "static/main/Assets/Password Images/Foods/157.png",
  "static/main/Assets/Password Images/Foods/158.jpg",
  "static/main/Assets/Password Images/Foods/159.jpg",
  "static/main/Assets/Password Images/Foods/160.jpg",
  "static/main/Assets/Password Images/Foods/161.jpg",
  "static/main/Assets/Password Images/Foods/162.jpg",
  "static/main/Assets/Password Images/Foods/163.jpg",
  "static/main/Assets/Password Images/Foods/164.jpg",
  "static/main/Assets/Password Images/Foods/165.jpg",
  "static/main/Assets/Password Images/Foods/166.jpg",
  "static/main/Assets/Password Images/Foods/167.jpg",
  "static/main/Assets/Password Images/Foods/168.jpg",
  "static/main/Assets/Password Images/Foods/169.jpg",
  "static/main/Assets/Password Images/Foods/170.jpg",
  "static/main/Assets/Password Images/Foods/171.jpg",
  "static/main/Assets/Password Images/Foods/172.jpg",
  "static/main/Assets/Password Images/Foods/173.jpg",
  "static/main/Assets/Password Images/Foods/174.jpg",
  "static/main/Assets/Password Images/Foods/175.jpg",
];

const ImageListTraffic = [
  "static/main/Assets/Password Images/TrafficSigns/201.png",
  "static/main/Assets/Password Images/TrafficSigns/202.webp",
  "static/main/Assets/Password Images/TrafficSigns/203.jpg",
  "static/main/Assets/Password Images/TrafficSigns/204.jpg",
  "static/main/Assets/Password Images/TrafficSigns/205.jpg",
  "static/main/Assets/Password Images/TrafficSigns/206.jpg",
  "static/main/Assets/Password Images/TrafficSigns/207.jpg",
  "static/main/Assets/Password Images/TrafficSigns/208.jpg",
  "static/main/Assets/Password Images/TrafficSigns/209.jpg",
  "static/main/Assets/Password Images/TrafficSigns/210.jpg",
  "static/main/Assets/Password Images/TrafficSigns/211.jpeg",
  "static/main/Assets/Password Images/TrafficSigns/212.jpeg",
  "static/main/Assets/Password Images/TrafficSigns/213.jpeg",
  "static/main/Assets/Password Images/TrafficSigns/214.jpeg",
  "static/main/Assets/Password Images/TrafficSigns/215.jpeg",
  "static/main/Assets/Password Images/TrafficSigns/216.jpeg",
  "static/main/Assets/Password Images/TrafficSigns/217.jpeg",
  "static/main/Assets/Password Images/TrafficSigns/218.jpeg",
  "static/main/Assets/Password Images/TrafficSigns/219.jpeg",
  "static/main/Assets/Password Images/TrafficSigns/220.jpeg",
  "static/main/Assets/Password Images/TrafficSigns/221.jpeg",
  "static/main/Assets/Password Images/TrafficSigns/222.jpeg",
  "static/main/Assets/Password Images/TrafficSigns/223.jpeg",
  "static/main/Assets/Password Images/TrafficSigns/224.jpeg",
  "static/main/Assets/Password Images/TrafficSigns/225.jpeg",
];
const ImageLists = {
  c1: ImageListFlags,
  c2: ImageListAnimals,
  c3: ImageListApps,
  c4: ImageListFruits,
  c5: ImageListEmojis,
  c6: ImageListTraffic,
  c7: ImageListFlowers,
  c8: ImageListFood,
};
//Global variable for password pattern
let passwordPattern = ".";
// console.log(ImageLists["c1"].length);
var categoryScript = document.getElementById("myScript");
var cat_chosen = categoryScript.getAttribute("data-category");
// console.log(cat_chosen);

function addToPattern(e) {
  const parentButton = e.parentNode;
  const patternContainer = document.querySelector(".choose-passwords");
  const patternImage = document.createElement("img");
  patternImage.src = e.src;
  // patternImage.id = e.id;
  patternImage.className = e.className;
  patternImage.classList.add("passwords-selected");
  if (
    document
      .querySelector(".password-pattern")
      .classList.contains("confirmed-passwords")
  ) {
    patternImage.classList.add("blurred");
  }
  patternContainer.appendChild(patternImage);
}

function backspace() {
  console.log("hello");
  const patternImages = document.querySelector(".choose-passwords");
  // console.log(patternImages);
  // console.log(patternImages.lastChild);
  patternImages.removeChild(patternImages.lastChild);
  if (passwordPattern != ".") {
    temp = passwordPattern.split(".");
    temp.splice(temp.length - 2, 1);
    passwordPattern = temp.join(".");
  }
  console.log(passwordPattern);
}
function showPassword(e) {
  const passwordImage = document.querySelectorAll(".passwords-selected");

  // e.addEventListener("onmousedown", function () {
  // console.log(passwordImage  .classList);
  for (let i = 0; i < passwordImage.length; i++) {
    passwordImage[i].classList.remove("blurred");
  }
}
function hidePassword(e) {
  const passwordImage = document.querySelectorAll(".passwords-selected");
  console.log(e);

  // e.addEventListener("onmousedown", function () {
  // console.log(passwordImage  .classList);

  for (let i = 0; i < passwordImage.length; i++) {
    console.log(passwordImage[i]);
    passwordImage[i].classList.add("blurred");
  }
}

function showPopUp() {
  const passwordPop = document.querySelector("#password-pop");
  console.log(passwordPop);
  passwordPop.style.display = "block";
}
function hidePopup() {
  const passwordPop = document.querySelector("#password-pop");

  passwordPop.style.display = "none";
}

function randomiseImage(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
}

randomiseImage(ImageLists[cat_chosen]);

function parseString(string) {
  var splitWords = string.split("/");
  var lastWord = splitWords[splitWords.length - 1];
  return lastWord.match(/\d+/)[0];
}

function getPasswordPattern(e) {
  let imgID = parseString(e.src);
  passwordPattern += imgID + ".";

  // let maxLength = 5;
  // var passwordLength = passwordPattern.split(".").length;

  // if (passwordLength > maxLength + 2) {
  //   alert("Password length exceeded");
  //   return;
  // }
  console.log(passwordPattern);
}
const passwordContainer = document.querySelector(".password-options");
const ImageContainer = passwordContainer.querySelectorAll(
  ".password-container"
);
for (let i = 0; i < ImageContainer.length; i++) {
  const backgroundImage = document.createElement("img");
  backgroundImage.id = i;

  if (cat_chosen == "c1") {
    backgroundImage.src = ImageListFlags[i];
  } else if (cat_chosen == "c2") {
    backgroundImage.src = ImageListAnimals[i];
  } else if (cat_chosen == "c3") {
    backgroundImage.src = ImageListApps[i];
  } else if (cat_chosen == "c4") {
    backgroundImage.src = ImageListFruits[i];
  } else if (cat_chosen == "c5") {
    backgroundImage.src = ImageListEmojis[i];
  } else if (cat_chosen == "c6") {
    backgroundImage.src = ImageListTraffic[i];
  } else if (cat_chosen == "c7") {
    backgroundImage.src = ImageListFlowers[i];
  } else if (cat_chosen == "c8") {
    backgroundImage.src = ImageListFood[i];
  }
  backgroundImage.classList.add("password-img");
  ImageContainer[i].appendChild(backgroundImage);
}

function refreshPage(e) {
  const parentButton = e.parentNode;
  const parentForm = parentButton.parentNode;
  console.log(parentForm);
  let images = parentForm.querySelectorAll(".password-img");
  const chosenCat = ImageLists[cat_chosen];
  // console.log(chosenCat[1]);
  if (
    document
      .querySelector(".password-pattern")
      .classList.contains("confirmed-password-pattern")
  ) {
    randomiseImage(ImageLists[cat_chosen]);
    for (let i = 0; i < images.length; i++) {
      console.log("ehllo");
      images[i].src = ImageLists[cat_chosen][i];
      // console.log(chosenCat[i]);
    }
  }
}

function hasClass(elem, classname) {
  return elem.classList.contains(classname);
}

document.addEventListener(
  "click",
  function (e) {
    if (hasClass(e.target, "password-img")) {
      getPasswordPattern(e.target);
      addToPattern(e.target);
      refreshPage(e.target);
    }
  },
  false
);

function doSubmit() {
  var passwordLength = passwordPattern.split(".").length - 2;
  if (passwordLength < 4) {
    // alert("Choose minimum 4 passwords");
    showPopUp();
  } else {
    document.getElementById("pwdInput").value = passwordPattern;
    document.getElementById("myForm").submit();
  }
}
